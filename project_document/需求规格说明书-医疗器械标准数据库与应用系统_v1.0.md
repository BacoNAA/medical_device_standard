# 医疗器械标准内容数据库与运用系统——需求规格说明书（SRS）

- 文档版本：v1.0
- 编制日期：2025-10-19
- 文档类型：需求规格说明书（Markdown）
- 适用范围：面向将医疗器械标准内容结构化入库并多场景输出的Web系统

---

## 1．引言

### 1.1 编写目的
阐明本系统的业务目标与软件需求，作为项目规划、设计开发、测试验收与运维的共同依据。读者对象包括：项目干系人、产品经理、架构师、开发与测试人员、实施与运维人员。

### 1.2 项目背景
医疗器械行业标准是检验、质量管理、设备管理及实验室工作的基础。当前存在标准内容分散、结构化程度不足、复用难及多场景输出效率低的问题。项目旨在将已转为Excel格式的标准内容结构化入库，并以标签等方式灵活组织，满足以下主要场景：
- 实验室能力评审（表1类汇总）
- 设备管理与认可检验检测能力（表2）
- 实验室操作规程编制（表3）
- 产品技术要求（PTR）编制与导出（Word），并联动标准数据库进行智能复用

参考标准示例：GB 15810-2019《一次性使用无菌注射器》。

### 1.3 定义
- 标准编号：例如“GB 15810-2019”，必须包含年代号。
- 项目条款：标准中的条款号（如“5.7.1”）。
- 标签：对标准条款、要求、方法等进行主题化标记的元数据，用于检索与输出。
- PTR（产品技术要求）：基于模板的产品质量要求文档，最终导出为Word格式。
- 角色：数据输入员、业务人员、质量管理人员、设备管理人员、实验室人员、管理员。
- 设备编号：设备管理人员维护的编码，格式为大写字母+3位数字（如“A001”）。

### 1.4 参考资料
- 基于医疗器械标准内容的信息化数据库及运用.md（输入输出总体需求）
- 需求规格说明书.md（本SRS章节框架模板）
- 3GB 15810-2019 一次性使用无菌注射器.md（输入内容示例与字段参考）
- 医疗器械产品技术要求格式.md（PTR Word导出格式约束）

---

## 2．任务概述

### 2.1 目标
- 将Excel化的医疗器械标准内容结构化入库，支持标签化管理、条款级检索与可视化浏览。
- 支持多角色分权访问：输入、浏览、报错建议、审核更正。
- 按使用场景导出三类Excel表（表1/表2/表3）。
- 提供PTR编辑器，基于模板智能复用标准内容，导出合规Word文档。
- 支持标准为Word原文时的自动/半自动入库（附加题）。

### 2.2 运行环境
- 客户端：Chrome/Edge（最近2个主版本）
- 服务器：Windows Server 2019+ 或同等级Linux（待确认）
- Web容器：IIS 10+/Nginx（待确认）
- 数据库：关系型数据库（SQL Server 2019+/PostgreSQL 14+，待确认）
- 文件存储：本地或对象存储（用于Excel/Word导入导出，待确认）

### 2.3 条件与限制
- 标准文本的版权合规由甲方保证。
- 首期数据量及并发规模待确认；SRS中给出性能基线并可配置扩展。
- PTR导出格式需严格符合给定模板（字体、段落与章节结构约束）。

---

## 3．数据描述

### 3.1 静态数据
- 用户与角色：数据输入员/业务/质量/设备/实验室/管理员。
- 字典与配置：标签分类、设备类型枚举、导出模板配置、PTR段落模板。
- 标准基础信息：标准编号、名称、发布/实施日期、引用文件、适用范围等。

### 3.2 动态数据（输入/输出）
- 标准条款项（Clause/Requirement/Method）：条款号、项目名称、项目要求、项目方法、关联附录。
- 标签：面向条款与方法的多对多标记。
- 设备信息：设备编号（A001样式）、名称、用途、关联条款（用于表2与表3）。
- 报错建议：浏览用户提交的内容疑义，输入员审核与修改闭环。
- 导出制品：三类Excel与PTR Word历史版本归档。

### 3.3 数据库介绍（概念）
- 实体：Standard、Clause、RequirementItem、Method、Appendix、Tag、Equipment、EquipmentLink、PTRDocument、PTRSection、PTRRef（引用到标准条款/方法）。
- 关系：
  - Standard 1—N Clause/RequirementItem/Method
  - Clause/RequirementItem/Method N—N Tag
  - Clause/RequirementItem/Method N—N Equipment（通过EquipmentLink）
  - PTRDocument 1—N PTRSection；PTRSection N—N PTRRef → Clause/Method

### 3.4 数据词典（核心字段示例）
- Standard：standardNo（含年代号）、name、publishedOn、effectiveOn、scope、refs
- Clause：standardNo、clauseNo、title、text
- RequirementItem：standardNo、clauseNo、itemTitle、requirementText
- Method：standardNo、appendixId、methodTitle、methodText
- Tag：tagKey、tagName、category
- Equipment：equipCode（[A-Z][0-9]{3}）、equipName、spec
- EquipmentLink：entityType、entityId、equipCode
- PTRDocument：ptrId、title、productName、status、version
- PTRSection：ptrId、sectionNo、heading、body
- PTRRef：ptrId、refType（Clause/Method）、refKey（如“GB 15810-2019 5.7.1”）

### 3.5 数据采集
- Excel导入：按模板列映射标准信息、条款、要求、方法、附录；校验标准编号含年代号；去重策略与主键冲突处理；导入失败行回执。
- Word导入（附加）：对提供的标准Word进行自动/半自动解析（正则+版面结构+关键字），人工校对后入库。
- 设备编码校验：必须满足正则^[A-Z][0-9]{3}$，重复编码拒绝。

---

## 4．功能需求

### 4.1 功能划分（模块）
1) 标准数据导入管理（Excel/Word）
2) 标准内容浏览与检索（含按编号与标签检索）
3) 标签管理与批量标注
4) 报错建议与审核闭环
5) Excel导出（表1/表2/表3）
6) PTR编辑器（模板化编制、智能推荐、两种引用方式）与Word导出
7) 权限与审计（RBAC+操作日志）
8) 配置与字典维护（模板、标签、设备等）

### 4.2 功能描述与验收标准

#### 4.2.1 标准数据导入管理
- 输入：Excel模板（首期支持GB 15810-2019结构化表）；可选Word标准原文（附加）。
- 处理：字段映射、主键校验、重复检测、失败回执；标准编号必须包含年代号（如“GB 15810-2019”）。
- 输出：入库成功记录与失败清单（行号、原因）。
- 验收：
  - 正常Excel导入1000行≤60s完成；
  - 重复条目不破坏既有数据；
  - 校验错误全量回执。

#### 4.2.2 标准内容浏览与检索
- 输入：检索条件（标准编号、条款号、关键词、标签）。
- 处理：支持标准编号精确匹配（含年代号）与条款号前缀匹配；关键词全文检索。
- 输出：结果列表与条款详情页（项目名称、要求、方法、附录链接）。
- 验收：典型查询≤2s返回首屏；编号不含年代号时给予校验提示。

#### 4.2.3 标签管理与批量标注
- 输入：标签定义与批量应用范围（按标准/条款/关键词筛选）。
- 处理：多对多标签写入；支持撤销与历史追溯。
- 输出：标签视图与统计。
- 验收：1万条批量标注≤30s完成。

#### 4.2.4 报错建议与审核闭环
- 角色：浏览用户（业务/质量/设备/实验室）可提交报错；仅数据输入员/管理员可修改数据。
- 输入：错误描述、证据（可选引用条款/上传附件）。
- 处理：流转到输入员审核；支持“接受并修正/驳回并说明”。
- 输出：状态通知与变更记录（可审计）。
- 验收：从提交到变更生效的状态可追踪，操作日志完整。

#### 4.2.5 Excel导出（表1/表2/表3）
- 表1（能力建设信息网站项目表，供质量管理）：
  - 列：项目名称｜标准编号｜项目条款
  - 生成规则：从选定标准及条款集合映射“项目名称=条款标题/项目名”，“项目条款=条款号”。
- 表2（认可检验检测能力表，供设备管理）：
  - 列：项目名称｜标准名称｜标准编号+空格+项目条款｜使用设备
  - 生成规则：拼接“标准编号+空格+项目条款”，关联EquipmentLink取“使用设备”；设备编号由设备管理人员按规则维护。
- 表3（操作规程表，供实验室）：
  - 列：标准编号｜标准名称｜项目条款｜项目名称｜项目要求｜使用设备｜项目方法｜注意事项
  - 生成规则：来自数据库条款与方法文本；“注意事项”允许空或从标签派生模板填充。
- 通用：支持Excel文件名与Sheet命名约定；导出审计记录。
- 验收：
  - 列头与顺序严格符合要求；
  - 典型1000行导出≤10s；
  - 字段拼接与映射准确率≥99.5%。

#### 4.2.6 PTR编辑器与Word导出
- 模板：严格遵循《医疗器械产品技术要求格式.md》章节结构与样式（产品名称、型号/规格、性能指标、检验方法、术语、附录等）。
- 编辑：
  - 在“检验方法”处自动预填短语：“试验结果应符合XX的要求”。
  - 关键词联想：在“性能指标/检验方法”编辑时，基于标准库推荐相关项目要求与方法；
  - 两种复用模式：
    1) 引用式：“按GB 15810-2019中附录C的方法进行试验，试验结果应符合2.7.2的要求”；
    2) 摘录式：当文本较短时，直接将标准数据库内容插入。
- 版本：PTR保存版本与差异；支持回滚。
- 导出：生成合规的Word文档（.docx），满足字体、层级、分页等模板约束。
- 验收：
  - 模板合规校验通过（段落/标题级别/字体约束）；
  - 推荐命中率可配置；
  - 引用与摘录均保留来源追溯（标准编号+条款/附录标识）。

#### 4.2.7 权限与审计
- 角色权限矩阵：
  - 数据输入员：导入、编辑、审核报错、导出
  - 业务/质量/设备/实验室：浏览、检索、提交报错、导出
  - 管理员：权限配置、模板与标签管理、审计
- 审计：记录关键操作（导入、编辑、标签变更、导出、PTR版本）。

#### 4.2.8 配置与字典维护
- 标签体系、设备库、导出模板、PTR段落模板均可在后台维护；变更有审计记录。

---

## 5．性能需求

### 5.1 数据精确度
- 导入字段映射准确率≥99.5%，不匹配项进入人工校对队列。
- 导出字段与模板合规率100%。

### 5.2 时间特性
- 检索首屏返回≤2s；分页查询≤3s。
- 1000行Excel导入≤60s；1000行导出≤10s。
- PTR Word导出≤5s（常规篇幅）。

### 5.3 适应性
- 支持新增标准与扩展表结构（保留向后兼容的数据映射层）。
- 支持数据库与文件存储替换（通过配置）。

---

## 6．运行需求

### 6.1 用户界面
- 导入向导：模板下载、字段预览、校验报告。
- 浏览检索：标准编号（含年代号）检索增强，条款树与全文搜索。
- 标签看板：标签分布、批量标注、撤销。
- 报错与审核：列表状态流转、原因说明、关联变更记录。
- 导出中心：三类Excel导出记录与下载。
- PTR编辑器：模板化大纲、智能推荐、引用/摘录一键插入、版本对比。

### 6.2 硬件接口
- 无专用外设依赖；“使用设备”字段与内部设备库关联维护。

### 6.3 软件接口
- 文件接口：Excel（.xlsx）导入/导出；Word（.docx）导出；可选Word（.docx）导入（附加）。
- API（可选）：提供检索与导出任务创建REST接口（鉴权受控）。

### 6.4 故障处理
- 导入失败的行级回执；可重试与跳过策略。
- 编辑冲突检测与合并提示；版本回滚。
- 导出失败的重试与异步通知。

---

## 7．其它需求
- 安全与合规：RBAC、最小权限、传输加密、密码策略、操作审计、备份与恢复。
- 可维护性：模块化分层、配置驱动、日志与监控。
- 可移植性：支持Windows/Linux与主流RDBMS；容器化部署可选。
- 可用性：目标可用性≥99.5%，关键操作有幂等保障。

---

## 附：输入与输出（与需求的直接对应）
- 输入：
  - Excel化标准内容（首期覆盖GB 15810-2019结构字段）；
  - 设备编号录入（格式：大写字母+3位数字，如A001）；
  - 报错建议（多角色提交，输入员审核）。
  - （附加）Word标准原文的自动/半自动解析入库。
- 输出：
  - Excel表1（能力建设信息网站项目表）：项目名称｜标准编号｜项目条款；
  - Excel表2（认可检验检测能力表）：项目名称｜标准名称｜标准编号+空格+项目条款｜使用设备；
  - Excel表3（操作规程表）：标准编号｜标准名称｜项目条款｜项目名称｜项目要求｜使用设备｜项目方法｜注意事项；
  - PTR Word文档：严格遵循《医疗器械产品技术要求格式.md》的章节与样式，支持引用式与摘录式复用。

---

## 验收清单（摘录）
- 导入：标准编号必须含年代号；1000行≤60s；错误行回执完整。
- 检索：以“GB 15810-2019”检索，返回条款树与全文命中；不含年代号时提示。
- 导出：表1/表2/表3列头与顺序正确，字段映射准确率≥99.5%。
- PTR：模板结构合规；自动插入“试验结果应符合XX的要求”；引用/摘录均保留来源追溯；可导出.docx。
- 权限：非输入员不可直接改数据；可提交报错；审计日志完整。

（完）
